<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ä»Šæ—¥æš‡ã§ä½•ã™ã‚‹ã‹ãŒæ±ºã¾ã‚‰ãªã„ã‚ãªãŸã¸ã€‚æ™‚é–“ãƒ»æ°—åˆ†ãƒ»å ´æ‰€ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ä»Šã§ãã‚‹äºˆå®šã‚„ãŠå‡ºã‹ã‘ãƒ—ãƒ©ãƒ³ã‚’å³ææ¡ˆã™ã‚‹ç„¡æ–™ã‚µãƒ¼ãƒ“ã‚¹ã€‚">
    <title>ä»Šæ—¥ãªã«ã™ã‚‹ï¼Ÿ|æ‚©ã¾ãšäºˆå®šãŒæ±ºã¾ã‚‹ï¼</title>

    <link rel="canonical" href="https://seisaily.com/">

    <link rel="icon" href="whattodotoday.png">
    <link rel="apple-touch-icon" href="whattodotoday.png">

    <meta property="og:title" content="ä»Šæ—¥ãªã«ã™ã‚‹ï¼Ÿ | æ‚©ã¾ãšäºˆå®šãŒæ±ºã¾ã‚‹ï¼">
    <meta property="og:description" content="ä»Šæ—¥æš‡ã§ä½•ã™ã‚‹ã‹ãŒæ±ºã¾ã‚‰ãªã„ã‚ãªãŸã¸ã€‚æ™‚é–“ãƒ»æ°—åˆ†ãƒ»å ´æ‰€ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ä»Šã§ãã‚‹ãŠå‡ºã‹ã‘ãƒ—ãƒ©ãƒ³ã‚’å³ææ¡ˆã™ã‚‹ç„¡æ–™ã‚µãƒ¼ãƒ“ã‚¹ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://seisaily.com/">
    <meta property="og:image" content="https://seisaily.com/whattodotoday.png">
    <meta property="og:site_name" content="ä»Šæ—¥ãªã«ã™ã‚‹ï¼Ÿ">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCM130H3XQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-ZCM130H3XQ');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8351694040475451"
     crossorigin="anonymous">
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #F49070;
            min-height: 100vh;
            color: #1A1A1A;
        }

        /* Ad Banner */
        .ad-banner {
            position: fixed !important;
            top: 0 !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 100% !important;
            max-width: 480px !important;
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            background: transparent !important;
            z-index: 1000 !important;
            overflow: hidden !important;
        }

        .ad-banner ins {
            display: inline-block !important;
            width: 320px !important;
            height: 50px !important;
            max-width: 320px !important;
            max-height: 50px !important;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding-top: 80px !important;
            padding-left: 20px;
            padding-right: 20px;
            padding-bottom: 0;
        }

        /* Loading */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #F49070;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-screen.hidden {
            display: none;
        }

        .loading {
            width: 56px;
            height: 56px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            color: white;
            font-weight: 600;
            font-size: 1.0625rem;
        }

        .loading-subtext {
            margin-top: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 0.875rem;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 20px;
        }

        .title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .title-text {
            font-size: 2rem;
            font-weight: 800;
            color: white;
            line-height: 1;
        }

        .title-highlight {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            color: #1A1A1A;
            background: #F49070;
            padding: 6px 20px;
            border-radius: 10px;
            border: 3px solid white;
            line-height: 1;
        }

        .subtitle {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1A1A1A;
        }

        /* Card */
        .card-container {
            perspective: 1500px;
            margin-bottom: 0;
        }

        .card {
            position: relative;
            width: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.flipped::before,
        .card.flipped::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: #F0927E;
            border-radius: 50%;
            opacity: 0;
            animation: particle 1s ease-out;
        }

        .card.flipped::before {
            animation-delay: 0.2s;
            background: #E88B77;
        }

        @keyframes particle {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translate(calc(-50% + 100px), calc(-50% - 100px)) scale(3); }
        }

        .card-face {
            position: absolute;
            width: 100%;
            min-height: 450px;
            background: #F5F0EB;
            border-radius: 32px;
            padding: 24px 20px 28px 20px;
            backface-visibility: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .card-back {
            transform: rotateY(180deg);
            position: relative;
            min-height: 450px;
        }

        /* Filters */
        .filter-group {
            margin-bottom: 12px;
        }

        .filter-label {
            display: block;
            font-size: 1rem;
            font-weight: 700;
            color: #1A1A1A;
            margin-bottom: 6px;
        }

        select {
            width: 100%;
            padding: 10px 18px;
            border: 2px solid #E88B77;
            border-radius: 20px;
            font-size: 0.9375rem;
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 500;
            color: #1A1A1A;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='14' height='9' viewBox='0 0 14 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L7 7L13 1' stroke='%23E88B77' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 18px center;
        }

        select:focus {
            outline: none;
            border-color: #F0927E;
            box-shadow: 0 0 0 4px rgba(240, 146, 126, 0.2);
        }

        /* Button */
        .decide-button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 20px;
            background: #F0927E;
            color: white;
            font-size: 1.125rem;
            font-weight: 800;
            font-family: 'Noto Sans JP', sans-serif;
            cursor: pointer;
            margin-top: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 24px rgba(240, 146, 126, 0.4);
        }

        .decide-button:hover:not(:disabled) {
            background: #E88B77;
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(240, 146, 126, 0.5);
        }

        .decide-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .decide-button:disabled {
            background: #C4B4A4;
            cursor: not-allowed;
            box-shadow: none;
            opacity: 0.6;
        }

        /* Results */
        .result-title {
            font-size: 2.5rem;
            font-weight: 900;
            color: #E88B77;
            margin-bottom: 16px;
            text-align: center;
            line-height: 1.2;
            animation: titleReveal 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
        }

        @keyframes titleReveal {
            0% { opacity: 0; transform: scale(0.3) rotate(-15deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .result-location {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1A1A1A;
            text-align: center;
            margin-bottom: 32px;
            animation: fadeInUp 0.8s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-section {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            border: 2px solid #E88B77;
            animation: slideInLeft 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
            animation-delay: calc(0.5s + var(--delay, 0s));
        }

        .result-section:nth-of-type(1) { --delay: 0s; }
        .result-section:nth-of-type(2) { --delay: 0.15s; }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px) scale(0.9); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }

        .result-section-title {
            font-size: 1rem;
            font-weight: 800;
            color: #E88B77;
            margin-bottom: 12px;
            animation: fadeIn 0.5s ease-out both;
            animation-delay: calc(0.6s + var(--delay, 0s));
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .result-section-content {
            font-size: 1.0625rem;
            line-height: 1.7;
            color: #1A1A1A;
            font-weight: 500;
            animation: fadeIn 0.5s ease-out both;
            animation-delay: calc(0.7s + var(--delay, 0s));
        }

        .tags {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 28px;
        }

        .tag {
            padding: 12px 20px;
            background: white;
            border-radius: 20px;
            font-size: 0.9375rem;
            font-weight: 700;
            color: #E88B77;
            border: 2px solid #E88B77;
            transition: all 0.3s ease;
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
            animation-delay: calc(0.8s + var(--tag-delay, 0s));
        }

        .tag:nth-child(1) { --tag-delay: 0s; }
        .tag:nth-child(2) { --tag-delay: 0.1s; }
        .tag:nth-child(3) { --tag-delay: 0.2s; }
        .tag:nth-child(4) { --tag-delay: 0.3s; }

        @keyframes popIn {
            0% { opacity: 0; transform: scale(0) rotate(-180deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .tag:hover {
            background: #E88B77;
            color: white;
            transform: translateY(-2px);
        }

        /* Action Buttons */
        .reset-button,
        .ai-search-button {
            width: 100%;
            padding: 16px;
            border-radius: 20px;
            font-size: 1.125rem;
            font-weight: 800;
            font-family: 'Noto Sans JP', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
        }

        .reset-button {
            background: white;
            border: 2px solid #E88B77;
            color: #E88B77;
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) 1.2s both;
        }

        .reset-button:hover {
            background: #E88B77;
            color: white;
            transform: translateY(-2px);
        }

        .ai-search-button {
            background: #F0927E;
            border: none;
            color: white;
            box-shadow: 0 6px 24px rgba(240, 146, 126, 0.4);
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) 1.4s both;
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3) translateY(50px); }
            50% { transform: scale(1.05) translateY(-10px); }
            70% { transform: scale(0.95) translateY(5px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .ai-search-button:hover {
            background: #E88B77;
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(240, 146, 126, 0.5);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px 20px 40px 20px;
            max-width: 480px;
            margin: 0 auto;
        }

        .footer-links { margin-bottom: 12px; }

        .footer-links a {
            color: white;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #F5F0EB;
            text-decoration: underline;
        }

        .footer-copyright {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8125rem;
            font-weight: 500;
        }

        /* =====================================================
           ã‚¢ãƒ—ãƒªè¨´æ±‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
           ===================================================== */
        .app-promo-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.55);
            z-index: 2000;
            display: flex;
            align-items: flex-end; /* ç”»é¢ä¸‹ã‹ã‚‰å‡ºç¾ */
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .app-promo-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .app-promo-sheet {
            width: 100%;
            max-width: 480px;
            background: #F5F0EB;
            border-radius: 28px 28px 0 0;
            padding: 8px 24px 40px 24px;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 -8px 40px rgba(0, 0, 0, 0.15);
        }

        .app-promo-overlay.visible .app-promo-sheet {
            transform: translateY(0);
        }

        /* ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ« */
        .app-promo-handle {
            width: 40px;
            height: 4px;
            background: #D4C4B4;
            border-radius: 2px;
            margin: 0 auto 20px auto;
        }

        /* ãƒãƒƒã‚¸è¡Œ */
        .app-promo-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #FFF3EF;
            border: 1.5px solid #F0927E;
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 0.75rem;
            font-weight: 700;
            color: #E88B77;
            margin-bottom: 14px;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .app-promo-title {
            font-size: 1.375rem;
            font-weight: 900;
            color: #1A1A1A;
            line-height: 1.4;
            margin-bottom: 6px;
        }

        .app-promo-title span {
            color: #E88B77;
        }

        /* ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆ */
        .app-promo-sub {
            font-size: 0.875rem;
            font-weight: 500;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* ãƒ¡ãƒªãƒƒãƒˆãƒªã‚¹ãƒˆ */
        .app-promo-features {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 24px;
        }

        .app-promo-feature {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            background: white;
            border-radius: 14px;
            padding: 12px 14px;
            border: 1.5px solid #EFE4DC;
        }

        .app-promo-feature-icon {
            font-size: 1.375rem;
            line-height: 1;
            flex-shrink: 0;
            margin-top: 1px;
        }

        .app-promo-feature-text {
            flex: 1;
        }

        .app-promo-feature-title {
            font-size: 0.9375rem;
            font-weight: 700;
            color: #1A1A1A;
            margin-bottom: 2px;
        }

        .app-promo-feature-desc {
            font-size: 0.8125rem;
            font-weight: 500;
            color: #888;
            line-height: 1.5;
        }

        /* ãƒœã‚¿ãƒ³ç¾¤ */
        .app-promo-cta {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 20px;
            background: #F0927E;
            color: white;
            font-size: 1.0625rem;
            font-weight: 800;
            font-family: 'Noto Sans JP', sans-serif;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(240, 146, 126, 0.45);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .app-promo-cta:hover {
            background: #E88B77;
            transform: translateY(-2px);
        }

        .app-promo-skip {
            width: 100%;
            padding: 12px;
            border: none;
            background: transparent;
            font-size: 0.9375rem;
            font-weight: 600;
            font-family: 'Noto Sans JP', sans-serif;
            color: #AAA;
            cursor: pointer;
            transition: color 0.2s;
        }

        .app-promo-skip:hover {
            color: #888;
        }

        /* Responsive */
        @media (max-width: 420px) {
            .title-text, .title-highlight { font-size: 1.75rem; }
            .subtitle { font-size: 0.8125rem; }
            .card-face { padding: 20px 18px 24px 18px; }
            .result-title { font-size: 2rem; }
            .filter-group { margin-bottom: 10px; }
            .filter-label { font-size: 0.9375rem; margin-bottom: 5px; }
            select { padding: 9px 16px; font-size: 0.875rem; }
            .decide-button { padding: 11px; font-size: 1.0625rem; }
            .container { padding-top: 80px !important; padding-left: 16px; padding-right: 16px; padding-bottom: 0; }
            header { margin-bottom: 16px; }
            .title-container { margin-bottom: 10px; }
            footer { padding: 16px 16px 32px 16px; }
            .footer-links a { font-size: 0.8125rem; }
            .footer-copyright { font-size: 0.75rem; }
            .app-promo-sheet { padding: 8px 20px 32px 20px; }
        }

        @media (max-height: 700px) {
            .filter-group { margin-bottom: 10px; }
            .filter-label { font-size: 0.9375rem; margin-bottom: 5px; }
            select { padding: 9px 16px; }
            .decide-button { padding: 11px; margin-top: 6px; }
            header { margin-bottom: 16px; }
            .card-face { padding: 20px 18px 24px 18px; }
        }

        @media (max-height: 650px) {
            .title-text, .title-highlight { font-size: 1.75rem; }
            .subtitle { font-size: 0.8125rem; }
            .filter-group { margin-bottom: 8px; }
            .filter-label { font-size: 0.875rem; margin-bottom: 4px; }
            select { padding: 8px 14px; font-size: 0.875rem; }
            .decide-button { padding: 10px; font-size: 1rem; }
            header { margin-bottom: 12px; }
            .card-face { padding: 18px 16px 20px 16px; }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading"></div>
        <div class="loading-text">èª­ã¿è¾¼ã¿ä¸­...</div>
        <div class="loading-subtext">ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ã¦ã„ã¾ã™</div>
    </div>

    <!-- AdSense ãƒãƒŠãƒ¼åºƒå‘Š -->
    <div class="ad-banner">
        <ins class="adsbygoogle"
             style="display:inline-block;width:320px;height:50px"
             data-ad-client="ca-pub-8351694040475451"
             data-ad-slot="YOUR_AD_SLOT_ID"></ins>
    </div>

    <div class="container">
        <header>
            <div class="title-container">
                <span class="title-text">ä»Šæ—¥ã€</span>
                <span class="title-highlight">ãªã«</span>
                <span class="title-text">ã™ã‚‹ï¼Ÿ</span>
            </div>
            <p class="subtitle">ã‚ãªãŸã®ç‰¹åˆ¥ãªä¸€æ—¥ã‚’è¦‹ã¤ã‘ã‚ˆã†</p>
        </header>

        <div class="card-container">
            <div class="card" id="main-card">
                <!-- Front Face -->
                <div class="card-face card-front">
                    <div class="filter-group">
                        <label class="filter-label">å ´æ‰€</label>
                        <select id="location-filter">
                            <option value="">æŒ‡å®šãªã—</option>
                            <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
                            <option value="é’æ£®">é’æ£®</option>
                            <option value="å²©æ‰‹">å²©æ‰‹</option>
                            <option value="å®®åŸ">å®®åŸ</option>
                            <option value="ç§‹ç”°">ç§‹ç”°</option>
                            <option value="å±±å½¢">å±±å½¢</option>
                            <option value="ç¦å³¶">ç¦å³¶</option>
                            <option value="èŒ¨åŸ">èŒ¨åŸ</option>
                            <option value="æ ƒæœ¨">æ ƒæœ¨</option>
                            <option value="ç¾¤é¦¬">ç¾¤é¦¬</option>
                            <option value="åŸ¼ç‰">åŸ¼ç‰</option>
                            <option value="åƒè‘‰">åƒè‘‰</option>
                            <option value="æ±äº¬">æ±äº¬</option>
                            <option value="ç¥å¥ˆå·">ç¥å¥ˆå·</option>
                            <option value="æ–°æ½Ÿ">æ–°æ½Ÿ</option>
                            <option value="çŸ³å·">çŸ³å·</option>
                            <option value="å¯Œå±±">å¯Œå±±</option>
                            <option value="ç¦äº•">ç¦äº•</option>
                            <option value="å±±æ¢¨">å±±æ¢¨</option>
                            <option value="é•·é‡">é•·é‡</option>
                            <option value="å²é˜œ">å²é˜œ</option>
                            <option value="é™å²¡">é™å²¡</option>
                            <option value="æ„›çŸ¥">æ„›çŸ¥</option>
                            <option value="ä¸‰é‡">ä¸‰é‡</option>
                            <option value="æ»‹è³€">æ»‹è³€</option>
                            <option value="äº¬éƒ½">äº¬éƒ½</option>
                            <option value="å¤§é˜ª">å¤§é˜ª</option>
                            <option value="å…µåº«">å…µåº«</option>
                            <option value="å¥ˆè‰¯">å¥ˆè‰¯</option>
                            <option value="å’Œæ­Œå±±">å’Œæ­Œå±±</option>
                            <option value="é³¥å–">é³¥å–</option>
                            <option value="å³¶æ ¹">å³¶æ ¹</option>
                            <option value="å²¡å±±">å²¡å±±</option>
                            <option value="åºƒå³¶">åºƒå³¶</option>
                            <option value="å±±å£">å±±å£</option>
                            <option value="å¾³å³¶">å¾³å³¶</option>
                            <option value="é¦™å·">é¦™å·</option>
                            <option value="æ„›åª›">æ„›åª›</option>
                            <option value="é«˜çŸ¥">é«˜çŸ¥</option>
                            <option value="ç¦å²¡">ç¦å²¡</option>
                            <option value="ä½è³€">ä½è³€</option>
                            <option value="é•·å´">é•·å´</option>
                            <option value="ç†Šæœ¬">ç†Šæœ¬</option>
                            <option value="å¤§åˆ†">å¤§åˆ†</option>
                            <option value="å®®å´">å®®å´</option>
                            <option value="é¹¿å…å³¶">é¹¿å…å³¶</option>
                            <option value="æ²–ç¸„">æ²–ç¸„</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">ã‚«ãƒ†ã‚´ãƒª</label>
                        <select id="category-filter">
                            <option value="">æŒ‡å®šãªã—</option>
                            <option value="è‡ªç„¶">è‡ªç„¶</option>
                            <option value="æ­´å²ãƒ»æ–‡åŒ–">æ­´å²ãƒ»æ–‡åŒ–</option>
                            <option value="ã‚¹ãƒãƒ¼ãƒ„ãƒ»ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³">ã‚¹ãƒãƒ¼ãƒ„ãƒ»ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</option>
                            <option value="ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ">ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ</option>
                            <option value="å®¿æ³Šãƒ»æ¸©æ³‰">å®¿æ³Šãƒ»æ¸©æ³‰</option>
                            <option value="ã‚°ãƒ«ãƒ¡">ã‚°ãƒ«ãƒ¡</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">æ™‚é–“</label>
                        <select id="time-filter">
                            <option value="">æŒ‡å®šãªã—</option>
                            <option value="1æ™‚é–“">1æ™‚é–“</option>
                            <option value="2æ™‚é–“">2æ™‚é–“</option>
                            <option value="3æ™‚é–“">3æ™‚é–“</option>
                            <option value="åŠæ—¥">åŠæ—¥</option>
                            <option value="1æ—¥">1æ—¥</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">äººæ•°</label>
                        <select id="people-filter">
                            <option value="">æŒ‡å®šãªã—</option>
                            <option value="1äºº">1äºº</option>
                            <option value="2äºº">2äºº</option>
                            <option value="ã‚°ãƒ«ãƒ¼ãƒ—">ã‚°ãƒ«ãƒ¼ãƒ—</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">å­£ç¯€</label>
                        <select id="season-filter">
                            <option value="">æŒ‡å®šãªã—</option>
                            <option value="æ˜¥">æ˜¥</option>
                            <option value="å¤">å¤</option>
                            <option value="ç§‹">ç§‹</option>
                            <option value="å†¬">å†¬</option>
                            <option value="é€šå¹´">é€šå¹´</option>
                        </select>
                    </div>

                    <button class="decide-button" id="decide-btn">æ±ºã‚ã‚‹</button>
                </div>

                <!-- Back Face -->
                <div class="card-face card-back">
                    <h2 class="result-title" id="result-title"></h2>
                    <div class="result-location" id="result-location"></div>

                    <div class="result-section">
                        <div class="result-section-title">ã‚„ã‚‹ã“ã¨</div>
                        <div class="result-section-content" id="result-activity"></div>
                    </div>

                    <div class="result-section">
                        <div class="result-section-title">ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆ</div>
                        <div class="result-section-content" id="result-point"></div>
                    </div>

                    <div class="tags" id="result-tags"></div>

                    <button class="reset-button" id="reset-btn">ã‚‚ã†ä¸€åº¦é¸ã¶</button>
                    <button class="ai-search-button" id="ai-search-btn">AIã§è©³ã—ãèª¿ã¹ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <a href="terms-of-service.html">åˆ©ç”¨è¦ç´„</a><br>
            <a href="privacy-policy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
        </div>
        <div class="footer-copyright">
            Â© seisaily.com
        </div>
    </footer>

    <!-- =====================================================
         ã‚¢ãƒ—ãƒªè¨´æ±‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆAndroidãƒ–ãƒ©ã‚¦ã‚¶å°‚ç”¨ï¼‰
         ===================================================== -->
    <div class="app-promo-overlay" id="app-promo-overlay" role="dialog" aria-modal="true" aria-label="ã‚¢ãƒ—ãƒªã®ã”æ¡ˆå†…">
        <div class="app-promo-sheet" id="app-promo-sheet">
            <div class="app-promo-handle"></div>

            <div class="app-promo-badge">
                <span>ğŸ—ºï¸</span>
                <span>Google ãƒãƒƒãƒ—é€£æº</span>
            </div>

            <h2 class="app-promo-title">ã‚¢ãƒ—ãƒªãªã‚‰ã‚‚ã£ã¨<span>ã‚¹ãƒ ãƒ¼ã‚º</span>ã«<br>ãŠå‡ºã‹ã‘ã§ãã‚‹ï¼</h2>
            <p class="app-promo-sub">ã‚¹ãƒãƒƒãƒˆãŒæ±ºã¾ã£ãŸã‚‰ã€ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§<br>Google ãƒãƒƒãƒ—ã«ç§»å‹•ã§ãã¾ã™ã€‚</p>

            <div class="app-promo-features">
                <div class="app-promo-feature">
                    <div class="app-promo-feature-icon">ğŸ“</div>
                    <div class="app-promo-feature-text">
                        <div class="app-promo-feature-title">Google ãƒãƒƒãƒ—ã«å³ã‚¸ãƒ£ãƒ³ãƒ—</div>
                        <div class="app-promo-feature-desc">ãƒ«ãƒ¼ãƒˆãƒ»å–¶æ¥­æ™‚é–“ãƒ»å£ã‚³ãƒŸã‚’ã™ãç¢ºèªã€‚ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆä¸è¦ã€‚</div>
                    </div>
                </div>
                <div class="app-promo-feature">
                    <div class="app-promo-feature-icon">âš¡</div>
                    <div class="app-promo-feature-text">
                        <div class="app-promo-feature-title">ã‚µã‚¯ã‚µã‚¯å‹•ä½œ</div>
                        <div class="app-promo-feature-desc">ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã§èª­ã¿è¾¼ã¿ãŒé€Ÿã„ã€‚å¤–å‡ºå…ˆã§ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ãªã—ã€‚</div>
                    </div>
                </div>
                <div class="app-promo-feature">
                    <div class="app-promo-feature-icon">ğŸ“±</div>
                    <div class="app-promo-feature-text">
                        <div class="app-promo-feature-title">ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã™ãèµ·å‹•</div>
                        <div class="app-promo-feature-desc">ã€Œä»Šæ—¥æš‡ï¼ã€ã¨æ€ã£ãŸã‚‰ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§é–‹ã‘ã‚‹ã€‚</div>
                    </div>
                </div>
            </div>

            <button class="app-promo-cta" id="app-promo-cta-btn">
                <span>ğŸ“²</span>
                <span>ç„¡æ–™ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
            </button>
            <button class="app-promo-skip" id="app-promo-skip-btn">ã“ã®ã¾ã¾ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¶šã‘ã‚‹</button>
        </div>
    </div>

    <script>
        // AdSenseåºƒå‘Šã®åˆæœŸåŒ–
        (adsbygoogle = window.adsbygoogle || []).push({});

        // 404.htmlã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†
        (function() {
            const redirect = sessionStorage.redirect;
            delete sessionStorage.redirect;
            if (redirect && redirect !== location.pathname) {
                history.replaceState(null, null, redirect);
            }
        })();

        // =====================================================
        // ã‚¢ãƒ—ãƒªè¨´æ±‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—åˆ¶å¾¡
        // =====================================================
        const AppPromo = (() => {
            const STORAGE_KEY = 'app_promo_shown_count';
            const MAX_SHOW_COUNT = 3; // åˆè¨ˆ3å›ã¾ã§è¡¨ç¤º

            // Androidåˆ¤å®šï¼ˆWebViewã¯é™¤ãã€Instagramå†…ãƒ–ãƒ©ã‚¦ã‚¶ã¯å«ã‚€ï¼‰
            function isAndroidBrowser() {
                const ua = navigator.userAgent;
                const isAndroid = /Android/i.test(ua);
                if (!isAndroid) return false;

                // ç´”ç²‹ãªWebViewã®ã¿é™¤å¤–ï¼ˆwv ãƒ•ãƒ©ã‚°ã€ã‹ã¤Instagramã§ãªã„ï¼‰
                const isInstagram = /Instagram/i.test(ua);
                const isNativeWebView = /wv\b/.test(ua) && !isInstagram;

                return !isNativeWebView;
            }

            function getShowCount() {
                return parseInt(localStorage.getItem(STORAGE_KEY) || '0', 10);
            }

            function incrementShowCount() {
                localStorage.setItem(STORAGE_KEY, String(getShowCount() + 1));
            }

            function shouldShow() {
                return isAndroidBrowser() && getShowCount() < MAX_SHOW_COUNT;
            }

            const overlay = document.getElementById('app-promo-overlay');

            function show() {
                if (!shouldShow()) return;
                // æ¬¡ãƒ•ãƒ¬ãƒ¼ãƒ ã§è¡¨ç¤ºã—ã¦CSSãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’åŠ¹ã‹ã›ã‚‹
                requestAnimationFrame(() => {
                    overlay.classList.add('visible');
                });
                incrementShowCount();

                // GA4ã‚¤ãƒ™ãƒ³ãƒˆ
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'app_promo_shown', {
                        show_count: getShowCount()
                    });
                }
            }

            function hide() {
                overlay.classList.remove('visible');
            }

            // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤èƒŒæ™¯ã‚¿ãƒƒãƒ—ã§é–‰ã˜ã‚‹
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) hide();
            });

            // ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ€ã‚¦ãƒ³ã§é–‰ã˜ã‚‹
            let touchStartY = 0;
            const sheet = document.getElementById('app-promo-sheet');
            sheet.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            sheet.addEventListener('touchend', (e) => {
                const diff = e.changedTouches[0].clientY - touchStartY;
                if (diff > 60) hide(); // 60pxä»¥ä¸Šä¸‹ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–‰ã˜ã‚‹
            }, { passive: true });

            return { show, hide };
        })();

        // =====================================================
        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        // =====================================================
        let activities = [];

        const defaultActivities = [
            { location: "æ±äº¬", place: "çš‡å±…æ±å¾¡è‹‘", activity: "æ±Ÿæˆ¸åŸã®æ­´å²ã‚’æ„Ÿã˜ãªãŒã‚‰æ•£ç­–", time: "2æ™‚é–“", point: "ç„¡æ–™ã§å…¥ã‚Œã‚‹æ—¥æœ¬åº­åœ’ã®ç¾ã—ã•", season: "é€šå¹´", people: "1äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "æ±äº¬", place: "ä»£ã€…æœ¨å…¬åœ’", activity: "ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯", time: "åŠæ—¥", point: "éƒ½ä¼šã®ã‚ªã‚¢ã‚·ã‚¹ã§è‡ªç„¶ã‚’æº€å–«", season: "æ˜¥", people: "2äºº", category: "è‡ªç„¶" },
            { location: "ç¥å¥ˆå·", place: "éŒå€‰", activity: "å¯ºç¤¾å·¡ã‚Š", time: "1æ—¥", point: "æ­´å²ã¨è‡ªç„¶ãŒèåˆã—ãŸå¤éƒ½", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "æ±äº¬", place: "æµ…è‰", activity: "é›·é–€ã‹ã‚‰ä»²è¦‹ä¸–é€šã‚Šã‚’æ•£ç­–", time: "2æ™‚é–“", point: "ä¸‹ç”ºã®é¢¨æƒ…ã¨ä¼çµ±å·¥èŠ¸å“", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "ç¥å¥ˆå·", place: "æ±Ÿãƒå³¶", activity: "æµ·ã‚’è¦‹ãªãŒã‚‰ã‚«ãƒ•ã‚§ã§ã®ã‚“ã³ã‚Š", time: "åŠæ—¥", point: "æ¹˜å—ã®æµ·é¢¨ã‚’æ„Ÿã˜ã‚‹ç™’ã—ã‚¹ãƒãƒƒãƒˆ", season: "å¤", people: "2äºº", category: "è‡ªç„¶" },
            { location: "æ±äº¬", place: "ä¸Šé‡å…¬åœ’", activity: "ç¾è¡“é¤¨å·¡ã‚Š", time: "åŠæ—¥", point: "å¤šå½©ãªæ–‡åŒ–æ–½è¨­ãŒé›†ã¾ã‚‹ã‚¨ãƒªã‚¢", season: "é€šå¹´", people: "1äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "åƒè‘‰", place: "è°·æ´¥å¹²æ½Ÿ", activity: "ãƒãƒ¼ãƒ‰ã‚¦ã‚©ãƒƒãƒãƒ³ã‚°", time: "2æ™‚é–“", point: "éƒ½ä¼šã®è¿‘ãã§é‡é³¥è¦³å¯Ÿ", season: "æ˜¥", people: "1äºº", category: "è‡ªç„¶" },
            { location: "åŸ¼ç‰", place: "å·è¶Š", activity: "è”µé€ ã‚Šã®è¡—ä¸¦ã¿æ•£ç­–", time: "åŠæ—¥", point: "å°æ±Ÿæˆ¸ã®é›°å›²æ°—ã‚’æ¥½ã—ã‚€", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "æ±äº¬", place: "ãŠå°å ´", activity: "æµ·æµœå…¬åœ’ã§å¤•æ—¥é‘‘è³", time: "2æ™‚é–“", point: "æ±äº¬æ¹¾ã®ç¾ã—ã„å¤•æ™¯", season: "é€šå¹´", people: "2äºº", category: "ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ" },
            { location: "ç¥å¥ˆå·", place: "æ¨ªæµœèµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«", activity: "ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã¨ã‚°ãƒ«ãƒ¡", time: "åŠæ—¥", point: "æ­´å²çš„å»ºé€ ç‰©ã§ãŠã—ã‚ƒã‚Œãªæ™‚é–“", season: "é€šå¹´", people: "2äºº", category: "ã‚°ãƒ«ãƒ¡" },
            { location: "æ±äº¬", place: "æ˜æ²»ç¥å®®", activity: "ç¥ç¤¾å‚æ‹ã¨æ£®æ—æµ´", time: "1æ™‚é–“", point: "éƒ½å¿ƒã®é™å¯‚ãªãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆ", season: "é€šå¹´", people: "1äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "åƒè‘‰", place: "æˆ¿ç·åŠå³¶", activity: "æµ·å²¸ãƒ‰ãƒ©ã‚¤ãƒ–", time: "1æ—¥", point: "å¤ªå¹³æ´‹ã®çµ¶æ™¯ã‚’æ¥½ã—ã‚€", season: "å¤", people: "2äºº", category: "è‡ªç„¶" },
            { location: "åŸ¼ç‰", place: "ç§©çˆ¶", activity: "æ¸©æ³‰ã¨ã‚°ãƒ«ãƒ¡", time: "1æ—¥", point: "è‡ªç„¶è±Šã‹ãªç™’ã—ã®æ¸©æ³‰åœ°", season: "å†¬", people: "2äºº", category: "å®¿æ³Šãƒ»æ¸©æ³‰" },
            { location: "æ±äº¬", place: "æ±äº¬ã‚¿ãƒ¯ãƒ¼", activity: "å±•æœ›å°ã‹ã‚‰å¤œæ™¯é‘‘è³", time: "2æ™‚é–“", point: "æ±äº¬ã®è±¡å¾´ã‹ã‚‰è¦‹ã‚‹çµ¶æ™¯", season: "é€šå¹´", people: "2äºº", category: "ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ" },
            { location: "ç¥å¥ˆå·", place: "ç®±æ ¹", activity: "ç¾è¡“é¤¨å·¡ã‚Šã¨æ¸©æ³‰", time: "1æ—¥", point: "ã‚¢ãƒ¼ãƒˆã¨è‡ªç„¶ã®èåˆ", season: "é€šå¹´", people: "2äºº", category: "å®¿æ³Šãƒ»æ¸©æ³‰" },
            { location: "æ„›çŸ¥", place: "åå¤å±‹åŸ", activity: "é‡‘ã®ã‚·ãƒ£ãƒãƒ›ã‚³ã¨å¤©å®ˆé–£è¦‹å­¦", time: "2æ™‚é–“", point: "åå¤å±‹ã®ã‚·ãƒ³ãƒœãƒ«çš„å­˜åœ¨", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "æ„›çŸ¥", place: "ç†±ç”°ç¥å®®", activity: "ä¸‰ç¨®ã®ç¥å™¨ã‚’ç¥€ã‚‹ç¥ç¤¾å‚æ‹", time: "1æ™‚é–“", point: "ä¼Šå‹¢ç¥å®®ã«æ¬¡ãæ ¼å¼é«˜ã„ç¥ç¤¾", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "å¤§é˜ª", place: "å¤§é˜ªåŸ", activity: "å¤©å®ˆé–£ã¨æ­´å²åšç‰©é¤¨è¦‹å­¦", time: "2æ™‚é–“", point: "è±Šè‡£ç§€å‰ã‚†ã‹ã‚Šã®ååŸ", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "å¤§é˜ª", place: "é“é “å €", activity: "ãŸã“ç„¼ããƒ»ãŠå¥½ã¿ç„¼ãé£Ÿã¹æ­©ã", time: "2æ™‚é–“", point: "å¤§é˜ªã®ã‚°ãƒ«ãƒ¡ã¨ãƒã‚ªãƒ³ã®è¡—", season: "é€šå¹´", people: "ã‚°ãƒ«ãƒ¼ãƒ—", category: "ã‚°ãƒ«ãƒ¡" },
            { location: "ç¦å²¡", place: "å¤ªå®°åºœå¤©æº€å®®", activity: "å­¦å•ã®ç¥æ§˜ã«å‚æ‹", time: "2æ™‚é–“", point: "è…åŸé“çœŸå…¬ã‚’ç¥€ã‚‹ç”±ç·’ã‚ã‚‹ç¥ç¤¾", season: "é€šå¹´", people: "2äºº", category: "æ­´å²ãƒ»æ–‡åŒ–" },
            { location: "ç¦å²¡", place: "ç¦å²¡ã‚¿ãƒ¯ãƒ¼", activity: "å±•æœ›å°ã‹ã‚‰åšå¤šæ¹¾ã‚’ä¸€æœ›", time: "1æ™‚é–“", point: "é«˜ã•234mã®æµ·æµœã‚¿ãƒ¯ãƒ¼", season: "é€šå¹´", people: "2äºº", category: "ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ" }
        ];

        async function loadActivities() {
            try {
                const response = await fetch('./activities.json');
                if (response.ok || response.status === 304) {
                    const data = await response.json();
                    activities = data;
                    console.log(`âœ… ${activities.length}ä»¶ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
                } else {
                    throw new Error('JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                }
            } catch (error) {
                console.log('â„¹ï¸  activities.jsonãŒè¦‹ã¤ã‹ã‚‰ãªã„ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™');
                activities = defaultActivities;
            }
        }

        // DOMè¦ç´ 
        const decideBtn = document.getElementById('decide-btn');
        const mainCard = document.getElementById('main-card');
        const resetBtn = document.getElementById('reset-btn');
        const aiSearchBtn = document.getElementById('ai-search-btn');
        const loadingScreen = document.getElementById('loading-screen');

        const locationFilter = document.getElementById('location-filter');
        const categoryFilter = document.getElementById('category-filter');
        const timeFilter = document.getElementById('time-filter');
        const peopleFilter = document.getElementById('people-filter');
        const seasonFilter = document.getElementById('season-filter');

        const resultTitle = document.getElementById('result-title');
        const resultLocation = document.getElementById('result-location');
        const resultActivity = document.getElementById('result-activity');
        const resultPoint = document.getElementById('result-point');
        const resultTags = document.getElementById('result-tags');

        let currentResult = null;

        function updateCardHeight() {
            const card = document.getElementById('main-card');
            const frontFace = card.querySelector('.card-front');
            const backFace = card.querySelector('.card-back');
            if (card.classList.contains('flipped')) {
                card.style.height = backFace.offsetHeight + 'px';
            } else {
                card.style.height = frontFace.offsetHeight + 'px';
            }
        }

        async function initialize() {
            await loadActivities();
            loadingScreen.classList.add('hidden');
            updateCardHeight();
            window.addEventListener('resize', updateCardHeight);
        }

        // ã‚¢ãƒ—ãƒªå†…ã‹Webã‹ã‚’åˆ¤å®š
        const isInApp = /wv|WebView/i.test(navigator.userAgent);

        if (isInApp) {
            aiSearchBtn.textContent = 'Google Mapã§é–‹ã';
        } else {
            aiSearchBtn.textContent = 'AIã§è©³ã—ãèª¿ã¹ã‚‹';
        }

        aiSearchBtn.addEventListener('click', () => {
            if (!currentResult) return;

            if (isInApp) {
                const mapQuery = encodeURIComponent(`${currentResult.place} ${currentResult.location}`);
                const mapUrl = `https://www.google.com/maps/search/?api=1&query=${mapQuery}`;
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'google_map_click', {
                        spot_name: currentResult.place,
                        location: currentResult.location
                    });
                }
                window.location.href = mapUrl;
            } else {
                const searchQuery = `${currentResult.place}ï¼ˆ${currentResult.location}ï¼‰ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã¨ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆ`;
                const perplexityUrl = `https://www.perplexity.ai/search?q=${encodeURIComponent(searchQuery)}`;
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'ai_search_click', {
                        spot_name: currentResult.place,
                        location: currentResult.location,
                        search_query: searchQuery
                    });
                }
                window.open(perplexityUrl, '_blank');
            }
        });

        const matchesSeason = (activitySeason, filterSeason) => {
            if (!filterSeason) return true;
            return activitySeason === filterSeason || activitySeason === 'é€šå¹´';
        };

        decideBtn.addEventListener('click', () => {
            const filters = {
                location: locationFilter.value,
                category: categoryFilter.value,
                time: timeFilter.value,
                people: peopleFilter.value,
                season: seasonFilter.value
            };

            if (typeof gtag !== 'undefined') {
                gtag('event', 'search_activity', {
                    location_filter: filters.location || 'æŒ‡å®šãªã—',
                    category_filter: filters.category || 'æŒ‡å®šãªã—',
                    time_filter: filters.time || 'æŒ‡å®šãªã—',
                    people_filter: filters.people || 'æŒ‡å®šãªã—',
                    season_filter: filters.season || 'æŒ‡å®šãªã—'
                });
            }

            let filtered = activities.filter(a =>
                (!filters.location || a.location === filters.location) &&
                (!filters.category || a.category === filters.category) &&
                (!filters.time || a.time === filters.time) &&
                (!filters.people || a.people === filters.people) &&
                matchesSeason(a.season, filters.season)
            );
            if (filtered.length === 0 && filters.people)
                filtered = activities.filter(a =>
                    (!filters.location || a.location === filters.location) &&
                    (!filters.category || a.category === filters.category) &&
                    (!filters.time || a.time === filters.time) &&
                    matchesSeason(a.season, filters.season)
                );
            if (filtered.length === 0 && filters.season)
                filtered = activities.filter(a =>
                    (!filters.location || a.location === filters.location) &&
                    (!filters.category || a.category === filters.category) &&
                    (!filters.time || a.time === filters.time)
                );
            if (filtered.length === 0 && filters.time)
                filtered = activities.filter(a =>
                    (!filters.location || a.location === filters.location) &&
                    (!filters.category || a.category === filters.category)
                );
            if (filtered.length === 0 && filters.category)
                filtered = activities.filter(a => !filters.location || a.location === filters.location);
            if (filtered.length === 0)
                filtered = activities;

            const selected = filtered[Math.floor(Math.random() * filtered.length)];
            if (typeof gtag !== 'undefined') {
                gtag('event', 'spot_selected', {
                    spot_name: selected.place,
                    location: selected.location,
                    category: selected.category
                });
            }
            displayResult(selected);

            decideBtn.disabled = true;
            decideBtn.textContent = 'æ±ºå®šä¸­...';
            setTimeout(() => {
                mainCard.classList.add('flipped');
                decideBtn.disabled = false;
                decideBtn.textContent = 'æ±ºã‚ã‚‹';
                setTimeout(updateCardHeight, 50);
            }, 600);
        });

        function getCategoryIcon(category) {
            const icons = {
                'è‡ªç„¶': 'ğŸŒ¿', 'æ­´å²ãƒ»æ–‡åŒ–': 'ğŸ›ï¸',
                'ã‚¹ãƒãƒ¼ãƒ„ãƒ»ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³': 'âš½', 'ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ': 'ğŸ¡',
                'å®¿æ³Šãƒ»æ¸©æ³‰': 'â™¨ï¸', 'ã‚°ãƒ«ãƒ¡': 'ğŸ´'
            };
            return icons[category] || 'ğŸ“';
        }

        function displayResult(activity) {
            currentResult = activity;
            resultTitle.textContent = activity.place;
            resultLocation.textContent = `ğŸ“ ${activity.location}`;
            resultActivity.textContent = activity.activity;
            resultPoint.textContent = activity.point;
            resultTags.innerHTML = `
                <span class="tag">â±ï¸ ${activity.time}</span>
                <span class="tag">ğŸ‘¥ ${activity.people}</span>
                <span class="tag">ğŸŒ¸ ${activity.season}</span>
                <span class="tag">${getCategoryIcon(activity.category)} ${activity.category}</span>
            `;
        }

        // =====================================================
        // ã‚‚ã†ä¸€åº¦é¸ã¶ ãƒœã‚¿ãƒ³ â€” Androidãªã‚‰ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—æŒŸã‚€
        // =====================================================
        resetBtn.addEventListener('click', () => {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'reset_click', {
                    previous_spot: currentResult ? currentResult.place : 'unknown'
                });
            }

            // Androidãƒ–ãƒ©ã‚¦ã‚¶ä¸”ã¤è¡¨ç¤ºä¸Šé™æœªé”ãªã‚‰è¨´æ±‚ã‚’æŒŸã‚€
            AppPromo.show();

            mainCard.classList.remove('flipped');
            setTimeout(updateCardHeight, 50);
        });

        // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®CTAãƒœã‚¿ãƒ³ï¼ˆå®Ÿéš›ã®ã‚¹ãƒˆã‚¢URLã«å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰
        document.getElementById('app-promo-cta-btn').addEventListener('click', () => {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'app_promo_cta_click', {
                    platform: 'android'
                });
            }
            // â–¼ Google Play ã‚¹ãƒˆã‚¢ã®URLã«å¤‰æ›´ã—ã¦ãã ã•ã„
            window.open('https://play.google.com/store/apps/details?id=com.seisaily.app', '_blank');
            AppPromo.hide();
        });

        // ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³
        document.getElementById('app-promo-skip-btn').addEventListener('click', () => {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'app_promo_skip', {
                    platform: 'android'
                });
            }
            AppPromo.hide();
        });

        initialize();
    </script>
</body>
</html>
